---
    -   hosts: 127.0.0.1
        connection: local
        become: yes
        remote_user: root
        vars:
            DIR_INSTALL : "teste"
            URL_GOLANG_INSTALL : "https://dl.google.com/go/go1.14.4.linux-amd64.tar.gz"
            GOLANG_DIST_FILE_NAME : "go1.14.4.linux-amd64.tar.gz"
        tasks:
            - name: Environment validation!
              assert:
                that:
                  - ansible_memtotal_mb >= 3500
                msg: "Minimum memory requirements in the deployment environment is 4GB! Operation failed!"
    
            - name: Upgrade all apt packages
              apt: upgrade=dist force_apt_get=yes
            
            - name: Install Basic requirements
              apt:
                    name: ['mongodb', 'wget', 'git', 'ca-certificates', 'net-tools', 'gcc', 'cmake', 'autoconf', 'build-essential', 'libtool', 'pkg-config', 'libmnl-dev', 'libyaml-dev']
                    state: present
                    update_cache: yes

            - name: Start Mongo-DB
              shell:  sudo systemctl start mongodb

            - name: Remove Go-lang
              shell:  sudo rm -rf /usr/local/go
                  
            - name: Download Go 1.14.4
              get_url: 
                url="{{ URL_GOLANG_INSTALL }}"
                dest="./{{ GOLANG_DIST_FILE_NAME }}"
            
            - name: Install Go 1.14.4 - 1/3
              shell: | 
                sudo tar -xvf {{ GOLANG_DIST_FILE_NAME }}
                sudo mv go /usr/local
                sudo rm {{ GOLANG_DIST_FILE_NAME }}

            - name: Install Go 1.14.4 - 2/3
              shell: | 
                echo 'export GOPATH=$HOME/go' >> ~/.bashrc
                echo 'export GOROOT=/usr/local/go' >> ~/.bashrc
                echo 'export PATH=$PATH:$GOPATH/bin:$GOROOT/bin' >> ~/.bashrc

            - name: Install Go 1.14.4 - 3/3
              shell: source ~/.bashrc
              args:
                executable: /bin/bash

            - pause :
                seconds: 3

            - name: Go get [sirupsen, calee0219]
              shell: | 
                go get -u github.com/sirupsen/logrus
                go get -u github.com/calee0219/fatal

            - git: 
                repo: 'https://github.com/PrinzOwO/gtp5g.git'
                dest: /root/gtp5g
                version: v0.1.0